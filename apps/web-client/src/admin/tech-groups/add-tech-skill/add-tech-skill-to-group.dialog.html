<div class="flex justify-between items-center p-2 px-4 gap-4">
  <h1 class="font-bold">Add Tech Skill To Group</h1>
  <button class="icon-button small" mat-dialog-close mat-ripple>
    <fa-icon [icon]="icons.faXmark"></fa-icon>
  </button>
</div>

<mat-divider class="!my-0"></mat-divider>

<form class="px-4 mt-4"
      [id]="formId" [formGroup]="form"
      (ngSubmit)="buttons.submit.click()">

  <div *ngrxLet="form.controls.skill as control"
       [formFieldControl]="control"
       class="w-64 max-w-full">
    <label>Skill</label>
    <input type="text" [formControl]="control" #input
           [matAutocomplete]="searchOptions">
    @if(control.hasError('required')){<span class="error">Required</span>}
    @if(control.hasError('notFound')){<span class="error">Not Found</span>}
    @if(control.hasError('exists')){<span class="error">Exists</span>}

    <mat-autocomplete #searchOptions hideSingleSelectionIndicator [displayWith]="search.displayWith">
      @for(option of search.options$(); track option.item.id) {
      <mat-option [value]="option.item">{{option.item.name}} ({{option.score}})</mat-option>
      }
    </mat-autocomplete>
  </div>
</form>

<mat-divider class="!mt-2"></mat-divider>


<div class="flex gap-2 p-2">
  <button type="submit" [attr.form]="formId"
          class="stroked-button primary" mat-ripple
          [disabled]="buttons.disabled$()">
    <replace-spinner [showSpinner]="buttons.submit.loading$()">
      Create
    </replace-spinner>
  </button>
  <button type="reset" [attr.form]="formId"
          class="stroked-button" mat-ripple>
    Reset
  </button>
</div>