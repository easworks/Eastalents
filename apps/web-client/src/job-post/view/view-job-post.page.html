<div class="container grid grid-cols-12 justify-items-center
      xl:gap-x-16">

  <div class="w-full col-span-12">
    <a class="highlight-button flex gap-3 items-center w-fit" href="/">
      <fa-icon [icon]="icons.faArrowLeft"></fa-icon>
      Back
    </a>
  </div>

  <div class="col-span-12 lg:w-10/12 xl:w-full xl:col-span-8">

    <div *ngrxLet="header$() as header" class="mt-4">
      <h6 class="text-3xl font-medium flex gap-2">
        <span class="flex-grow">{{header.title}} </span>
        @if (actions.edit.active$()) {
        <a class="icon-button flex-none self-center" mat-ripple matTooltip="Edit Primary Domain" routerLink="../edit"
           [queryParams]="{ step: 'primary-domain' }">
          <fa-icon [icon]="icons.faEdit"></fa-icon>
        </a>
        }
      </h6>

      <p class="mt-1 font-medium flex gap-2">
        <span class="flex-grow text-gray-500 ">{{header.subtitle}}</span>
        @if (actions.edit.active$()) {
        <a class="icon-button flex-none self-center" mat-ripple matTooltip="Edit Role" routerLink="../edit"
           [queryParams]="{ step: 'roles' }">
          <fa-icon [icon]="icons.faEdit"></fa-icon>
        </a>
        }
      </p>
    </div>

    <mat-divider></mat-divider>

    <div class="block mt-8 xl:hidden">
      <ng-container [ngTemplateOutlet]="$jobSpecifics"></ng-container>
    </div>

    <div class="mt-8">
      <h6 class="rounded-full bg-primary-100 text-xl font-bold flex items-center justify-between">
        <span class="p-1 px-4">Overview</span>
        @if(actions.edit.active$()){
        <a class="icon-button flex-none" mat-ripple matTooltip="Edit Overview" routerLink="../edit"
           [queryParams]="{ step: 'description' }">
          <fa-icon [icon]="icons.faEdit"></fa-icon>
        </a>
        }
      </h6>
      <p class="mt-4 px-4 leading-7 text-base-content/80">{{jobPost$().description}}</p>
    </div>

    <div class="mt-8">
      <h6 class="rounded-full bg-primary-100 text-xl font-bold flex items-center justify-between">
        <span class="p-1 px-4">Primary Domain & Expertise</span>
        <!-- @if(isEditable$()){
        <button class="icon-button flex-none" mat-ripple routerLink="../edit"
          [queryParams]="{ step: 'primary-domain' }">
          <fa-icon [icon]="icons.faEdit"></fa-icon>
        </button>
        } -->
      </h6>
      <ul class="mt-4 px-4 flex flex-col gap-3" style="list-style: disc;">
        <div class="primary-domain-expertise" *ngrxLet="primaryDomainExpertise$() as primaryDomain">
          @for(pm of primaryDomain.domainExpertise; track pm.key) {
          <div>
            <label class="flex items-center">{{pm.key}}
              @if (actions.edit.active$()) {
              <a class="icon-button flex-none self-center" mat-ripple routerLink="../edit"
                 [queryParams]="{ step: pm.url }">
                <fa-icon [icon]="icons.faEdit"></fa-icon>
              </a>
              }
            </label>
            <p>{{pm.value}}</p>
          </div>
          }
        </div>
      </ul>
    </div>

    <div class="mt-8">
      <h6 class="rounded-full bg-primary-100 text-xl font-bold flex items-center justify-between">
        <span class="p-1 px-4">Industry & Technical Experience</span>
      </h6>
      <div class="mt-4 px-4 flex flex-col gap-4">
        <div class="industry">
          <label class="flex gap-4 items-center">
            <span class="flex-grow text-gray-400 font-medium">Industry</span>
            @if (actions.edit.active$()) {
            <a class="icon-button flex-none self-center" mat-ripple routerLink="../edit"
               [queryParams]="{ step: 'industry' }">
              <fa-icon [icon]="icons.faEdit"></fa-icon>
            </a>
            }
          </label>
          @for(panel of jobPost$().industries; track panel.group) {
          <div class="group">
            <label>{{panel.group}}</label>
            <p>{{panel.items.join(', ')}}</p>
          </div>
          }
        </div>

        <div class="technical-experience">
          <label class="flex gap-4 items-center">
            <span class="flex-grow text-gray-400 font-medium">Technical Experience</span>
            @if (actions.edit.active$()) {
            <a class="icon-button flex-none self-center" mat-ripple routerLink="../edit"
               [queryParams]="{ step: 'technology-stack' }">
              <fa-icon [icon]="icons.faEdit"></fa-icon>
            </a>
            }
          </label>
          @for(panel of techGroups$(); track panel.group) {
          <div class="group">
            <label>{{panel.group}}</label>
            <p>{{panel.items.join(', ')}}</p>
          </div>
          }
        </div>
      </div>
    </div>

    @if (actions.apply.allowed$()) {
    <mat-divider class="!mt-8"></mat-divider>

    <div class="mt-8 flex flex-col md:flex-row items-center gap-5 md:gap-0 justify-center md:justify-between">
      <div>
        <h6 class="text-xl font-semibold text-primary-500">Interested in this job?</h6>
        <p class="mt-1 text-base text-base-content/60">100 days left to apply</p>
      </div>
      <button class="shaded-button primary flex items-center justify-between gap-4">
        Apply Now
        <!-- <fa-icon [icon]="icons.faArrowRight"></fa-icon> -->
      </button>
      <!-- <button
                  class="bg-primary w-fit hover:bg-primary-focus transition hover:duration-500 py-3 px-5 text-base font-semibold text-primary-content rounded-lg flex items-center gap-3"
                  fdprocessedid="lh9v6">
            Apply Now
            <span>
              <svg class="text-xl" width="18" height="18" viewBox="0 0 14 14"
                   fill="none" xmlns="http://www.w3.org/2000/svg">
                <g opacity="0.6">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M6.86409 2.59846C7.12037 2.34218 7.53588 2.34218 7.79216 2.59846L11.7297 6.53596C11.9859 6.79224 11.9859 7.20776 11.7297 7.46404L7.79216 11.4015C7.53588 11.6578 7.12037 11.6578 6.86409 11.4015C6.6078 11.1453 6.6078 10.7297 6.86409 10.4735L9.6813 7.65625H2.73438C2.37194 7.65625 2.07812 7.36244 2.07812 7C2.07812 6.63756 2.37194 6.34375 2.73438 6.34375H9.6813L6.86409 3.52654C6.6078 3.27026 6.6078 2.85474 6.86409 2.59846Z"
                        fill="currentColor"></path>
                </g>
              </svg>
            </span>
          </button> -->
    </div>
    }



    <!-- <div class="mt-12">
                        <h5 class="text-2xl text-base-content font-semibold">Related Jobs</h5>
                        <div class="mt-6 flex flex-col gap-6">
                            <div>
                                <div
                                    class="p-6 bg-base-100 hover:bg-base-300/30 hover:duration-500 transition border border-base-content/20 rounded-xl group">
                                    <div class="flex items-center justify-between">
                                        <div class="flex flex-col md:flex-row items-start md:items-center gap-6"><img
                                                alt="company logo" loading="lazy" width="48" height="48"
                                                decoding="async" data-nimg="1" class="p-2 bg-primary rounded-xl"
                                                srcset="/_next/image?url=%2Fimages%2Fcompany-logo.png&amp;w=48&amp;q=75 1x, /_next/image?url=%2Fimages%2Fcompany-logo.png&amp;w=96&amp;q=75 2x"
                                                src="/_next/image?url=%2Fimages%2Fcompany-logo.png&amp;w=96&amp;q=75"
                                                style="color: transparent;">
                                            <div>
                                                <p class="text-sm font-medium text-base-content">Microsoft</p>
                                                <h6
                                                    class="mt-1 text-lg font-semibold text-base-content group-hover:opacity-60 group-hover:duration-300 transition">
                                                    <a href="/job-details">Need Senior MERN Stack Developer</a></h6>
                                                <div class="mt-3 flex items-center gap-2">
                                                    <p
                                                        class="bg-base-300/30 px-2 py-1 w-fit text-xs text-base-content/70 rounded-md">
                                                        Full Time</p>
                                                    <p
                                                        class="bg-base-300/30 px-2 py-1 w-fit text-xs text-base-content/70 rounded-md">
                                                        $5k - $7k</p>
                                                    <p
                                                        class="bg-base-300/30 px-2 py-1 w-fit text-xs text-base-content/70 rounded-md">
                                                        12 hours ago</p>
                                                </div>
                                            </div>
                                        </div><a
                                            class="hidden md:flex items-center gap-1.5 px-4 py-2.5 text-base-content/60 bg-base-300/50 group-hover:bg-primary group-hover:text-primary-content rounded-lg transition group-hover:duration-500"
                                            href="/job-details">View Job<span><svg width="18" height="18"
                                                    viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <g opacity="0.6">
                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M6.86409 2.59846C7.12037 2.34218 7.53588 2.34218 7.79216 2.59846L11.7297 6.53596C11.9859 6.79224 11.9859 7.20776 11.7297 7.46404L7.79216 11.4015C7.53588 11.6578 7.12037 11.6578 6.86409 11.4015C6.6078 11.1453 6.6078 10.7297 6.86409 10.4735L9.6813 7.65625H2.73438C2.37194 7.65625 2.07812 7.36244 2.07812 7C2.07812 6.63756 2.37194 6.34375 2.73438 6.34375H9.6813L6.86409 3.52654C6.6078 3.27026 6.6078 2.85474 6.86409 2.59846Z"
                                                            fill="currentColor"></path>
                                                    </g>
                                                </svg></span></a>
                                    </div>
                                    <p class="mt-5 text-base text-base-content/60">Lorem ipsum dolor sit amet,
                                        consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
                                        dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                                        laboris nisi ut aliquip ex ea commodo consequat.</p>
                                </div>
                            </div>
                            <div>
                                <div
                                    class="p-6 bg-base-100 hover:bg-base-300/30 hover:duration-500 transition border border-base-content/20 rounded-xl group">
                                    <div class="flex items-center justify-between">
                                        <div class="flex flex-col md:flex-row items-start md:items-center gap-6"><img
                                                alt="company logo" loading="lazy" width="48" height="48"
                                                decoding="async" data-nimg="1" class="p-2 bg-primary rounded-xl"
                                                srcset="/_next/image?url=%2Fimages%2Fcompany-logo.png&amp;w=48&amp;q=75 1x, /_next/image?url=%2Fimages%2Fcompany-logo.png&amp;w=96&amp;q=75 2x"
                                                src="/_next/image?url=%2Fimages%2Fcompany-logo.png&amp;w=96&amp;q=75"
                                                style="color: transparent;">
                                            <div>
                                                <p class="text-sm font-medium text-base-content">Microsoft</p>
                                                <h6
                                                    class="mt-1 text-lg font-semibold text-base-content group-hover:opacity-60 group-hover:duration-300 transition">
                                                    <a href="/job-details">Need Senior MERN Stack Developer</a></h6>
                                                <div class="mt-3 flex items-center gap-2">
                                                    <p
                                                        class="bg-base-300/30 px-2 py-1 w-fit text-xs text-base-content/70 rounded-md">
                                                        Full Time</p>
                                                    <p
                                                        class="bg-base-300/30 px-2 py-1 w-fit text-xs text-base-content/70 rounded-md">
                                                        $5k - $7k</p>
                                                    <p
                                                        class="bg-base-300/30 px-2 py-1 w-fit text-xs text-base-content/70 rounded-md">
                                                        12 hours ago</p>
                                                </div>
                                            </div>
                                        </div><a
                                            class="hidden md:flex items-center gap-1.5 px-4 py-2.5 text-base-content/60 bg-base-300/50 group-hover:bg-primary group-hover:text-primary-content rounded-lg transition group-hover:duration-500"
                                            href="/job-details">View Job<span><svg width="18" height="18"
                                                    viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <g opacity="0.6">
                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M6.86409 2.59846C7.12037 2.34218 7.53588 2.34218 7.79216 2.59846L11.7297 6.53596C11.9859 6.79224 11.9859 7.20776 11.7297 7.46404L7.79216 11.4015C7.53588 11.6578 7.12037 11.6578 6.86409 11.4015C6.6078 11.1453 6.6078 10.7297 6.86409 10.4735L9.6813 7.65625H2.73438C2.37194 7.65625 2.07812 7.36244 2.07812 7C2.07812 6.63756 2.37194 6.34375 2.73438 6.34375H9.6813L6.86409 3.52654C6.6078 3.27026 6.6078 2.85474 6.86409 2.59846Z"
                                                            fill="currentColor"></path>
                                                    </g>
                                                </svg></span></a>
                                    </div>
                                    <p class="mt-5 text-base text-base-content/60">Lorem ipsum dolor sit amet,
                                        consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
                                        dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                                        laboris nisi ut aliquip ex ea commodo consequat.</p>
                                </div>
                            </div>
                            <div>
                                <div
                                    class="p-6 bg-base-100 hover:bg-base-300/30 hover:duration-500 transition border border-base-content/20 rounded-xl group">
                                    <div class="flex items-center justify-between">
                                        <div class="flex flex-col md:flex-row items-start md:items-center gap-6"><img
                                                alt="company logo" loading="lazy" width="48" height="48"
                                                decoding="async" data-nimg="1" class="p-2 bg-primary rounded-xl"
                                                srcset="/_next/image?url=%2Fimages%2Fcompany-logo.png&amp;w=48&amp;q=75 1x, /_next/image?url=%2Fimages%2Fcompany-logo.png&amp;w=96&amp;q=75 2x"
                                                src="/_next/image?url=%2Fimages%2Fcompany-logo.png&amp;w=96&amp;q=75"
                                                style="color: transparent;">
                                            <div>
                                                <p class="text-sm font-medium text-base-content">Microsoft</p>
                                                <h6
                                                    class="mt-1 text-lg font-semibold text-base-content group-hover:opacity-60 group-hover:duration-300 transition">
                                                    <a href="/job-details">Need Senior MERN Stack Developer</a></h6>
                                                <div class="mt-3 flex items-center gap-2">
                                                    <p
                                                        class="bg-base-300/30 px-2 py-1 w-fit text-xs text-base-content/70 rounded-md">
                                                        Full Time</p>
                                                    <p
                                                        class="bg-base-300/30 px-2 py-1 w-fit text-xs text-base-content/70 rounded-md">
                                                        $5k - $7k</p>
                                                    <p
                                                        class="bg-base-300/30 px-2 py-1 w-fit text-xs text-base-content/70 rounded-md">
                                                        12 hours ago</p>
                                                </div>
                                            </div>
                                        </div><a
                                            class="hidden md:flex items-center gap-1.5 px-4 py-2.5 text-base-content/60 bg-base-300/50 group-hover:bg-primary group-hover:text-primary-content rounded-lg transition group-hover:duration-500"
                                            href="/job-details">View Job<span><svg width="18" height="18"
                                                    viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <g opacity="0.6">
                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M6.86409 2.59846C7.12037 2.34218 7.53588 2.34218 7.79216 2.59846L11.7297 6.53596C11.9859 6.79224 11.9859 7.20776 11.7297 7.46404L7.79216 11.4015C7.53588 11.6578 7.12037 11.6578 6.86409 11.4015C6.6078 11.1453 6.6078 10.7297 6.86409 10.4735L9.6813 7.65625H2.73438C2.37194 7.65625 2.07812 7.36244 2.07812 7C2.07812 6.63756 2.37194 6.34375 2.73438 6.34375H9.6813L6.86409 3.52654C6.6078 3.27026 6.6078 2.85474 6.86409 2.59846Z"
                                                            fill="currentColor"></path>
                                                    </g>
                                                </svg></span></a>
                                    </div>
                                    <p class="mt-5 text-base text-base-content/60">Lorem ipsum dolor sit amet,
                                        consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
                                        dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                                        laboris nisi ut aliquip ex ea commodo consequat.</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-16">
                            <div
                                class="py-16 bg-gradient-to-b from-primary/10 to-primary/0 rounded-3xl flex flex-col items-center px-5">
                                <div class="max-w-[470px] text-center">
                                    <h3 class="text-2xl md:text-4xl text-base-content font-semibold">Subscribe
                                        Newsletter</h3>
                                    <p class="mt-3 text-base md:text-lg text-base-content/60">Sign up to our newsletter
                                        to ger $10 off your first order, as well as news of our latest offers and
                                        product releases.</p>
                                    <div class="mt-8 relative"><input placeholder="Email"
                                            class="w-full outline-none p-5 rounded-xl shadow-md" type="text"
                                            fdprocessedid="6gjjds"><button
                                            class="btn btn-primary px-5 py-3 absolute right-2 top-2"
                                            fdprocessedid="wctdih">Subscribe</button></div>
                                </div>
                            </div>
                        </div>
                    </div> -->
  </div>
  <div class="hidden xl:block xl:col-span-4 mt-2">
    <ng-container [ngTemplateOutlet]="$jobSpecifics"></ng-container>
  </div>
</div>

<ng-template #$jobSpecifics>
  <div class="job-specifics" *ngrxLet="jobSpecifics$() as jobSpecifics">
    <!-- TODO: Ask Mr. Nanda which roles can see the job status -->
    @if(role$() === 'employer' || role$() === 'admin'){
    <div>
      <p class="mr-auto">Job Status</p>
      <p class="font-medium">{{jobSpecifics.jobPostStatus}}</p>
    </div>
    <mat-divider class="!my-0"></mat-divider>
    }
    <div>
      <p class="mr-auto">Experience</p>
      <p class="font-medium">{{jobSpecifics.experience}}</p>
      @if (actions.edit.active$()) {
      <a class="icon-button flex-none self-center" mat-ripple routerLink="../edit"
         [queryParams]="{ step: 'required-experience' }">
        <fa-icon [icon]="icons.faEdit"></fa-icon>
      </a>
      }
    </div>
    <mat-divider class="!my-0"></mat-divider>
    <div>
      <p class="mr-auto">No of Hours</p>
      <p class="font-medium">{{jobSpecifics.noOfHours}}</p>
      @if (actions.edit.active$()) {
      <a class="icon-button flex-none self-center" mat-ripple routerLink="../edit"
         [queryParams]="{ step: 'weekly-commitment' }">
        <fa-icon [icon]="icons.faEdit"></fa-icon>
      </a>
      }
    </div>
    <mat-divider class="!my-0"></mat-divider>
    <div>
      <p class="mr-auto">Engagement Period</p>
      <p class="font-medium">{{jobSpecifics.engagementPeriod}}</p>
      @if (actions.edit.active$()) {
      <a class="icon-button flex-none self-center" mat-ripple routerLink="../edit"
         [queryParams]="{ step: 'engagement-period' }">
        <fa-icon [icon]="icons.faEdit"></fa-icon>
      </a>
      }
    </div>
    <mat-divider class="!my-0"></mat-divider>
    <div>
      <p class="mr-auto">Hourly Budget</p>
      <p class="font-medium">{{jobSpecifics.hourlyBudget}}</p>
      @if (actions.edit.active$()) {
      <a class="icon-button flex-none self-center" mat-ripple routerLink="../edit"
         [queryParams]="{ step: 'hourly-budget' }">
        <fa-icon [icon]="icons.faEdit"></fa-icon>
      </a>
      }
    </div>
    <mat-divider class="!my-0"></mat-divider>
    <div>
      <p class="mr-auto">Start Timeline</p>
      <p class="font-medium">{{jobSpecifics.startTimeLine}}</p>
      @if (actions.edit.active$()) {
      <a class="icon-button flex-none self-center" mat-ripple routerLink="../edit"
         [queryParams]="{ step: 'project-kickoff-timeline' }">
        <fa-icon [icon]="icons.faEdit"></fa-icon>
      </a>
      }

    </div>
    <mat-divider class="!my-0"></mat-divider>
    <div>
      <p class="mr-auto">Work Environment</p>
      <p class="font-medium">{{jobSpecifics.workEnvironment}}</p>
      @if (actions.edit.active$()) {
      <a class="icon-button flex-none self-center" mat-ripple routerLink="../edit"
         [queryParams]="{ step: 'work-environment' }">
        <fa-icon [icon]="icons.faEdit"></fa-icon>
      </a>
      }
    </div>
  </div>
  @if(actions.apply.allowed$()){
  <a class="mt-8 shaded-button primary flex gap-3 items-center w-fit mx-auto" href="/">
    Apply for this Position
    <!-- <fa-icon [icon]="icons.faArrowRight"></fa-icon> -->
  </a>
  }

  <div class="flex gap-4 justify-end">
    @if (actions.edit.allowed$()) {
    <button class="stroked-button mt-8 edit-toggle mr-auto"
            mat-ripple
            (click)="actions.edit.click()"
            [class.active]="actions.edit.active$()">
      {{ actions.edit.active$() ? 'Stop Editing' : 'Edit' }}
    </button>
    }

    @if (actions.deleteJob.allowed$()) {
    <button class="stroked-button mt-8 warn"
            mat-ripple
            (click)="actions.deleteJob.click()">
      Delete
    </button>
    }

    @if (actions.cancel.allowed$()) {
    <button class="stroked-button mt-8 warn"
            mat-ripple
            (click)="actions.cancel.click()">
      Cancel
    </button>
    }
  </div>



</ng-template>