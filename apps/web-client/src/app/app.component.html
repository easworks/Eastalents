<div id="app-top-bar" *ngrxLet="topBar$() as topBar"
     [class.dark]="topBar.dark">

  <a routerLink="/" class="grid content-center">
    <img [src]="topBar.brandImage">
  </a>

  <app-horizontal-menu *ngIf="showHorizontalMenu$()"></app-horizontal-menu>

  <div class="flex gap-2 items-center flex-none">
    <account-widget></account-widget>
    <a routerLink="/register/employer" class="shaded-button primary" mat-ripple>
      Hire Now
    </a>
    <button class="icon-button" mat-ripple (click)="appSidenav.toggle()">
      <fa-icon [icon]="icons.faBars"></fa-icon>
    </button>
  </div>

  <mat-progress-bar *ngIf="navigating$()" class="!absolute bottom-0 left-0" mode="indeterminate">
  </mat-progress-bar>
</div>

<mat-sidenav-container class="flex-grow !flex flex-col !overflow-visible">
  <mat-sidenav #appSidenav fixedInViewport class="!top-16" mode="over" position="end">
    <app-vertical-menu></app-vertical-menu>
  </mat-sidenav>
  <mat-sidenav-content class="flex-grow !flex flex-col !overflow-visible bg-white">
    <router-outlet class="hidden [&_+_*]:flex-1"></router-outlet>

    <div class="flex flex-wrap gap-8 gap-x-16 px-10 bg-white py-10 border-t 
          lg:flex-nowrap lg:justify-between">
      <div class="lg:max-w-[20rem] transition-all">
        <img src="/assets/brand/logo-full-dark.png">
        <p class="mt-8 text-base">
          EASWORKS serves as a specialized Enterprise Application Software (EAS) platform that connects businesses,
          startups, and leading companies with a network of highly skilled enterprise software developers.
        </p>
        <p class="mt-8 text-base">
          Our primary goal is to meticulously match our clients with the most suitable technical talent, leveraging
          their deep industry domain knowledge and expertise in enterprise applications.
        </p>
        <div class="mt-8">
          <div class="flex gap-4 text-2xl">
            <a *ngFor="let icon of brandLinks$()" [href]="icon.link">
              <fa-icon [icon]="icon.icon!"></fa-icon>
            </a>

          </div>
          <p class="mt-4">
            4653 Carmel Mountain Rd, <br>
            Ste 308 PMB 1024 San Diego, <br>
            CA 92130-6650
          </p>
        </div>
      </div>
      <nav class="@container flex-1">
        <div class="w-full lg:w-max lg:m-auto grid gap-4 @lg:gap-x-8 grid-cols-12 grid-flow-row-dense">

          <div *ngrxLet="footerNav.companies as group"
               class="col-span-6
                @sm:col-span-6 
                @3xl:col-span-4 
                @6xl:col-span-3">
            <ng-container *ngTemplateOutlet="footerNavGroup; context: {$implicit: group}"></ng-container>
          </div>

          <div *ngrxLet="footerNav.freelancers as group"
               class="col-span-6
                @sm:col-span-6 
                @3xl:col-span-4 
                @6xl:col-span-3">
            <ng-container *ngTemplateOutlet="footerNavGroup; context: {$implicit: group}"></ng-container>
          </div>

          <div *ngrxLet="footerNav.useCase as group"
               class="col-span-12 
                @sm:col-span-6 
                @3xl:col-span-4 @3xl:row-span-2 @3xl:col-start-1 
                @6xl:col-span-3 @6xl:col-start-7">
            <ng-container *ngTemplateOutlet="footerNavGroup; context: {$implicit: group}"></ng-container>
          </div>

          <div *ngrxLet="footerNav.industries as group"
               class="col-span-12 
                @sm:col-span-6 
                @3xl:col-span-4 @3xl:row-span-2 @3xl:col-start-5 
                @6xl:col-span-3 @6xl:col-start-10">
            <ng-container *ngTemplateOutlet="footerNavGroup; context: {$implicit: group}"></ng-container>
          </div>

          <div *ngrxLet="footerNav.about as group"
               class="col-span-12 
                @sm:col-span-6 
                @3xl:col-span-4 @3xl:col-start-9 
                @6xl:col-span-3">
            <ng-container *ngTemplateOutlet="footerNavGroup; context: {$implicit: group}"></ng-container>
          </div>

          <div *ngrxLet="footerNav.contact as group"
               class="col-span-12 
                @sm:col-span-6 
                @3xl:col-span-4 @3xl:col-start-9 
                @6xl:col-span-3">
            <ng-container *ngTemplateOutlet="footerNavGroup; context: {$implicit: group}"></ng-container>
          </div>

        </div>

        <ng-template let-group #footerNavGroup>
          <p class="m-0 font-semibold @sm:text-lg">{{group.group}}</p>
          <ul class="mt-2 text-sm @sm:text-base">
            @for(item of group.items; track item) {
            <li class="py-1">
              <a [routerLink]="item.link" class="flex gap-2 max-w-fit">
                <fa-icon [icon]="icons.faAngleRight" class="inline-block mt-1"></fa-icon>
                <span>{{item.name}}</span>
              </a>
            </li>
            }
          </ul>
        </ng-template>
      </nav>
    </div>

    <div class="py-4 px-8 text-center text-sm bg-secondary-950 flex justify-between">
      <p class="text-white"> Â© Copyright 2023 EASWORKS. All Rights Reserved.</p>
      <ul class="flex text-white">
        <li>
          <a href="#" class="border-r pr-2">Privacy Policy</a>
        </li>
        <li>
          <a href="#" class="pl-2">Terms of Service</a>
        </li>
      </ul>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>