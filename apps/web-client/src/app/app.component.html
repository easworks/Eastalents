<header id="app-header" class="z-10 sticky top-0">
  @if (isSignedIn$()) {
  <app-authenticated-header></app-authenticated-header>
  }
  @else {
  <app-public-header></app-public-header>
  }

  @if(navigating$()) {
  <mat-progress-bar class="!absolute bottom-0 left-0" mode="indeterminate">
  </mat-progress-bar>
  }
</header>

<mat-sidenav-container class="flex-grow !flex flex-col !overflow-visible">
  <mat-sidenav #appSidenav fixedInViewport
               id="app-sidenav"
               [mode]="sideBarState.mode$()"
               [opened]="sideBarState.opened$()"
               [position]="sideBarState.position$()">
    @if (isSignedIn$()) {
    <authenticated-vertical-menu></authenticated-vertical-menu>
    }
    @else {
    <public-sidebar></public-sidebar>
    }
  </mat-sidenav>

  <mat-sidenav-content class="flex-grow !flex flex-col !overflow-visible">
    @if (!blankPage$()) {
    <router-outlet class="hidden [&_+_*]:flex-1"></router-outlet>
    }

    <app-footer class="mt-auto !flex-none"></app-footer>
  </mat-sidenav-content>
</mat-sidenav-container>