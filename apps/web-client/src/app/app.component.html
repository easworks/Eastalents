<div id="app-top-bar" *ngrxLet="topBar$() as topBar" [class.dark]="topBar.dark">
  @if(sideBarState.toggle.position$() === 'left'){
  <button class="icon-button" mat-ripple (click)="appSidenav.toggle()">
    <fa-icon [icon]="icons.faBars"></fa-icon>
  </button>
  }
  <a routerLink="/" class="grid content-center mr-auto">
    <img [src]="topBar.brandImage">
  </a>
  @if(publicMenu.main.horizontal.show$()) {
  <app-horizontal-menu class="mx-auto"
                       [menuItems]="publicMenu.main.horizontal.$()"></app-horizontal-menu>
  }

  <div class="flex gap-2 items-center flex-none">
    <account-widget></account-widget>
    <a routerLink="/register/employer" class="shaded-button primary" mat-ripple>
      Hire Now
    </a>
    <div class="flex items-center">
      @if(sideBarState.toggle.position$() === 'right'){
      <button class="icon-button" mat-ripple (click)="appSidenav.toggle()">
        <fa-icon [icon]="icons.faBars"></fa-icon>
      </button>
      }

      <button class="icon-button text-emerald-500" mat-ripple [class.hidden]="sw.hidden$()" (click)="sw.update()">
        <fa-icon [icon]="icons.faCircleArrowUp"></fa-icon>
      </button>
    </div>
  </div>
  @if(navigating$()) {
  <mat-progress-bar class="!absolute bottom-0 left-0" mode="indeterminate">
  </mat-progress-bar>
  }
</div>

<mat-sidenav-container class="flex-grow !flex flex-col !overflow-visible">
  <mat-sidenav #appSidenav fixedInViewport
               id="app-sidenav"
               [mode]="sideBarState.mode$()"
               [opened]="sideBarState.opened$()"
               [position]="sideBarState.position$()">
    @if (isSignedIn$()) {
    <authenticated-vertical-menu></authenticated-vertical-menu>
    }
    @else {
    <public-vertical-menu [public]="publicMenu.main.vertical.$()"
                          [static]="publicMenu.static"
                          [about]="publicMenu.about"
                          [social]="publicMenu.social"></public-vertical-menu>
    }
  </mat-sidenav>

  <mat-sidenav-content class="flex-grow !flex flex-col !overflow-visible bg-white">
    <router-outlet class="hidden [&_+_*]:flex-1"></router-outlet>

    <app-footer></app-footer>
  </mat-sidenav-content>
</mat-sidenav-container>