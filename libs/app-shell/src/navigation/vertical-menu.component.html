<ng-container *ngIf="publicMenu.show$()">

  <nav class="public-menu">
    <ul class="grid">
      <ng-container *ngFor="let item of publicMenu.items()">

        <ng-container *ngIf="item.children?.length; else $noChildren">
          <li class="has-submenu">
            <a class="p-2 px-4 rounded hover:bg-slate-500/10 focus:bg-slate-500/10
                flex justify-between items-center"
               [routerLink]="item.link" mat-ripple
               (click)="toggleOpen($event)">
              <span>{{item.name}}</span>
              <fa-icon [icon]="icons.faAngleDown"></fa-icon>
            </a>
            <ul class="hidden overflow-hidden">
              <li *ngFor="let subItem of item.children">
                <a class="p-2 px-4 pl-8 rounded hover:bg-slate-500/10 focus:bg-slate-500/10
                                flex justify-between items-center"
                   [routerLink]="subItem.link" mat-ripple>
                  <span>{{subItem.name}}</span>
                </a>
              </li>
            </ul>
          </li>
        </ng-container>

        <ng-template #$noChildren>
          <li>
            <a class="p-2 px-4 block rounded hover:bg-slate-500/10 focus:bg-slate-500/10"
               [routerLink]="item.link" mat-ripple>
              {{item.name}}
            </a>
          </li>
        </ng-template>

      </ng-container>
    </ul>

  </nav>

  <mat-divider></mat-divider>
</ng-container>

<nav>
  <ul>
    <li *ngFor="let item of staticMenuItems">
      <a class="p-2 px-4 block rounded hover:bg-slate-500/10 focus:bg-slate-500/10"
         [routerLink]="item.link">
        <span>{{item.name}}</span>
      </a>
    </li>
  </ul>
</nav>

<mat-divider></mat-divider>

<mat-progress-spinner class="mx-auto" diameter="32" mode="indeterminate" *ngIf="domains.loading$(); else $domainsLoaded"></mat-progress-spinner>

<ng-template #$domainsLoaded>
  <div class="domain-selector">
    <div class="domains">
      <button *ngFor="let domain of domains.domains$()"
              (click)="domains.selectDomain(domain)"
              [class.selected]="domain.selected">
        {{domain.value.key | uppercase}}
      </button>
    </div>
    <div class="products">
      <input type="text" [ngModel]="domains.filter$()" (ngModelChange)="domains.filter$.set($event)" placeholder="Type to search products">
      <div class="filtered">
        <div>
          <a [routerLink]="product.link" *ngFor="let product of domains.filteredProducts$()">{{product.name | uppercase}}</a>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<mat-divider></mat-divider>

<nav>
  <p class="text-lg m-0">About Us</p>
  <ul class="mt-2">
    <li *ngFor="let item of aboutMenuItems">
      <a class="p-2 px-4 block rounded hover:bg-slate-500/10 focus:bg-slate-500/10"
         [routerLink]="item.link">
        <span>{{item.name}}</span>
      </a>
    </li>
  </ul>
</nav>

<mat-divider></mat-divider>

<div>
  <p>Follow Us</p>
  <div class="flex gap-2">
    <a class="icon-button" *ngFor="let link of brandLinks" mat-ripple>
      <i class="fa-brands fa-{{link.icon}}"></i>
    </a>
  </div>
</div>