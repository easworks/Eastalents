<nav class="flex items-center">
  <ul class="flex gap-1 items-center">
    @for(item of menuItems$(); track item) {
    @if (item.children?.length) {

    <li class="has-submenu relative group"
        (mouseenter)="unfocus()">
      <a class="p-2 rounded flex gap-2 items-center"
         [class]="linkClass$()"
         href="javascript:void(0)" mat-ripple>
        <span>{{item.name}}</span>
        <fa-icon [icon]="icons.faAngleDown"></fa-icon>
      </a>
      <ul class="hidden group-focus-within:grid"
          [class.large]="item.children!.length > 4"
          [class.group-hover:grid]="!(isTouchDevice$())">

        @for(subItem of item.children; track subItem) {
        <li>
          <a [routerLink]="subItem.link" (click)="collapseAll()">
            <span *ngIf="subItem.icon" class="icon">
              <fa-icon [icon]="subItem.icon"></fa-icon>
            </span>
            <span>{{subItem.name}}</span>
          </a>
        </li>
        }

        <li class="contents">
          <mat-divider vertical></mat-divider>
        </li>
      </ul>
    </li>
    }
    @else {
    <li class="group">
      <a class="p-2 block rounded"
         [class]="linkClass$()"
         [routerLink]="item.link" mat-ripple>
        {{item.name}}
      </a>
    </li>
    }
    }

  </ul>
</nav>