<nav class="flex items-center">
  <ul class="flex gap-1 items-center">
    <ng-container *ngFor="let item of menuItems$()">

      <ng-container *ngIf="item.children?.length; else $noChildren">
        <li class="has-submenu relative group"
            (mouseenter)="unfocus()">
          <a class="p-2 rounded flex gap-2 items-center
              group-hover:bg-slate-500/10 group-focus-within:bg-slate-500/10"
             [routerLink]="item.link" mat-ripple>
            <span>{{item.name}}</span>
            <i class="fa-solid fa-angle-down"></i>
          </a>
          <ul class="hidden group-focus-within:grid"
              [class.large]="item.children!.length > 4"
              [class.group-hover:grid]="!(uiState.isTouchDevice$())">
            <li *ngFor="let subItem of item.children">
              <a [routerLink]="subItem.link" (click)="collapseAll()">
                <span *ngIf="subItem.icon" class="icon">
                  <i class="fa-solid {{subItem.icon}}"></i>
                </span>
                <span>{{subItem.name}}</span>
              </a>
            </li>
            <li class="contents">
              <mat-divider vertical></mat-divider>
            </li>
          </ul>
        </li>
      </ng-container>

      <ng-template #$noChildren>
        <li>
          <a class="p-2 block rounded hover:bg-slate-500/10 focus:bg-slate-500/10"
             [routerLink]="item.link" mat-ripple>
            {{item.name}}
          </a>
        </li>

      </ng-template>
    </ng-container>

  </ul>
</nav>