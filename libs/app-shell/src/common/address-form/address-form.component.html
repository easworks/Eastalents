@let form = form$();
<div class="grid @xl:grid-cols-2 gap-x-8">

  <div *ngrxLet="form.controls.line1 as control"
       [formFieldControl]="control"
       class=" @xl:col-span-2">

    <label>
      Line 1
      <span class="text-warn">*</span>
    </label>

    <input type="text" [formControl]="control" placeholder="Line 1">
    @if (control.hasError('required')){<span class="error">Required</span>}

  </div>

  <div *ngrxLet="form.controls.line1 as control"
       [formFieldControl]="control"
       class=" @xl:col-span-2">

    <label> Line 2 </label>

    <input type="text" [formControl]="control" placeholder="Line 2">
  </div>

  <div *ngrxLet="form.controls.country as control"
       [formFieldControl]="control"
       [class.show-spinner]="country.loading$()">
    <label>
      Country
      <span class="text-warn">*</span>
    </label>

    <input type="text" [formControl]="control" placeholder="Type to filter"
           [matAutocomplete]="countryOptions">
    @if (control.hasError('required')){<span class="error">Required</span>}


    <mat-autocomplete #countryOptions hideSingleSelectionIndicator>
      @for(option of country.results$(); track option) {
      <mat-option [value]="option.name" (onSelectionChange)="$event.source.deselect()">
        <div class="flex gap-4 items-center">
          <span class="font-emoji">{{option.emoji}}</span>
          <span>{{option.name}}</span>
        </div>
      </mat-option>
      }

    </mat-autocomplete>

    <mat-progress-spinner class="field-spinner right-3 top-8"
                          mode="indeterminate" diameter="16"></mat-progress-spinner>
  </div>

  <div *ngrxLet="form.controls.state as control"
       [formFieldControl]="control"
       [class.show-spinner]="state.loading$()">

    <label>
      State
      @if (state.required$()) {<span class="text-warn">*</span>}
    </label>

    <input type="text" [formControl]="control" placeholder="Type to filter"
           [matAutocomplete]="stateOptions">
    @if (control.hasError('required')){<span class="error">Required</span>}


    <mat-autocomplete #stateOptions hideSingleSelectionIndicator>
      @for(option of state.results$(); track option) {
      <mat-option [value]="option.name" (onSelectionChange)="$event.source.deselect()">
        <div class="flex gap-4 items-center"> {{option.name}} </div>
      </mat-option>
      }

    </mat-autocomplete>

    <mat-progress-spinner class="field-spinner right-3 top-8"
                          mode="indeterminate" diameter="16"></mat-progress-spinner>

  </div>


  <div *ngrxLet="form.controls.city as control"
       [formFieldControl]="control"
       [class.show-spinner]="city.loading$()">

    <label>
      City
      @if (city.required$()) {<span class="text-warn">*</span>}
    </label>

    <input type="text" [formControl]="control" placeholder="Type to filter"
           [matAutocomplete]="cityOptions">
    @if (control.hasError('required')){<span class="error">Required</span>}


    <mat-autocomplete #cityOptions hideSingleSelectionIndicator>
      @for(option of city.results$(); track option) {
      <mat-option [value]="option.name" (onSelectionChange)="$event.source.deselect()">
        <div class="flex gap-4 items-center"> {{option.name}} </div>
      </mat-option>
      }

    </mat-autocomplete>

    <mat-progress-spinner class="field-spinner right-3 top-8"
                          mode="indeterminate" diameter="16"></mat-progress-spinner>

  </div>

  <div *ngrxLet="form.controls.postalCode as control"
       [formFieldControl]="control">

    <label>
      Postal Code
      <span class="text-warn">*</span>
    </label>

    <input type="text" [formControl]="control" placeholder="Postal Code">
    @if (control.hasError('required')){<span class="error">Required</span>}

  </div>

</div>