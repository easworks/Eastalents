<form *ngrxLet="contact.form as form" [formGroup]="form"
      (ngSubmit)="contact.submit()">
  <div *ngrxLet="form.controls.name as control"
       [formFieldControl]="control">
    <label>Name <span class="text-warn">*</span></label>
    <input type="text" [formControl]="control">
  </div>

  <div *ngrxLet="form.controls.email as control"
       [formFieldControl]="control">
    <label>Email <span class="text-warn">*</span></label>
    <input type="text" [formControl]="control">
  </div>

  <div *ngrxLet="form.controls.phoneNumber as control"
       [formFieldControl]="control">

    <label>Phone Number</label>

    <phone-number-input [formGroup]="form" [options]="contact.options.countryCodes$()"></phone-number-input>

    @if (control.controls.code.invalid) {<span class="error">Invalid Code</span>}
    @if (control.controls.number.hasError('pattern')) {<span class="error">Invalid number</span>}
    @if (control.controls.number.hasError('required')) {<span class="error">Number required</span>}
  </div>

  <div *ngrxLet="form.controls.subject as control"
       [formFieldControl]="control">
    <label>Subject <span class="text-warn">*</span></label>
    <mat-select [formControl]="control">
      @for(option of contact.options.subject; track option) {
      <mat-option [value]="option">{{option}}</mat-option>
      }
    </mat-select>
    @if (control.hasError('required')) { <span class="error">Required</span> }
  </div>

  <div *ngrxLet="form.controls.message as control"
       [formFieldControl]="control">
    <label>Message</label>
    <div class="field field-interactive">
      <textarea [formControl]="control" class="resize-none" rows="5"></textarea>
    </div>
  </div>

  <button type="submit"
          class="shaded-button primary"
          mat-ripple
          [disabled]="loading.any$()">
    <replace-spinner [showSpinner]="contact.submitting$()">
      Send message
    </replace-spinner>
  </button>
</form>