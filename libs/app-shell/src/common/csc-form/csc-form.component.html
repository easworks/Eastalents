@let form = form$();
<div class="grid">
  <div *ngrxLet="form.controls.country as control"
       [formFieldControl]="control"
       [class.show-spinner]="country.loading$()">
    <label>
      Country
      <span class="text-warn">*</span>
    </label>

    <input type="text" [formControl]="control" placeholder="Type to filter"
           [matAutocomplete]="countryOptions">
    @if (control.hasError('required')){<span class="error">Required</span>}


    <mat-autocomplete #countryOptions hideSingleSelectionIndicator [displayWith]="country.displayWith">
      @for(option of country.results$(); track option) {
      <mat-option [value]="option" (onSelectionChange)="$event.source.deselect()">
        <div class="flex gap-4 items-center">
          <span class="font-emoji">{{option.emoji}}</span>
          <span>{{option.name}}</span>
        </div>
      </mat-option>
      }

    </mat-autocomplete>

    <mat-progress-spinner class="field-spinner right-3 top-8"
                          mode="indeterminate" diameter="16"></mat-progress-spinner>
  </div>
</div>